<p
    class="mb-5"
    *ngIf="name">
    {{ name + ' ' }}<span *ngIf="unitLong || unitShort"
        >({{ unitLong ? unitLong : unitShort}})</span
    >
</p>
<div
    class="range-wrap"
    #rangeDiv>
    <div
        class="range-value"
        #bubbleLower>
        <input
            class="bubble-input overlay"
            [ngClass]="thumbs[0].inputVisible ? '' : 'invisible'"
            [formControl]="thumbs[0].bubbleFormControl"
            (blur)="toggleInputInvisible(thumbs[0])"
            (keydown.enter)="toggleInputInvisible(thumbs[0])"
            #bubbleInputLower />
        <div
            class="bubble-span overlay"
            [ngClass]="thumbs[0].inputVisible ? 'invisible' : ''"
            (dblclick)="toggleInputVisible(thumbs[0])">
            {{ thumbs[0].value }}{{ unitShort }}
        </div>
    </div>
    <div
        class="range-value"
        #bubbleUpper>
        <input
            class="bubble-input overlay"
            [ngClass]="thumbs[1].inputVisible ? '' : 'invisible'"
            [formControl]="thumbs[1].bubbleFormControl"
            (blur)="toggleInputInvisible(thumbs[1])"
            (keydown.enter)="toggleInputInvisible(thumbs[1])"
            #bubbleInputLower />
        <div
            class="bubble-span overlay"
            [ngClass]="thumbs[1].inputVisible ? 'invisible' : ''"
            (dblclick)="toggleInputVisible(thumbs[1])">
            {{ thumbs[1].value }}{{ unitShort }}
        </div>
    </div>
    <span
        *ngIf="minBubblePosition <= trackForegroundLeft"
        class="bubble-span-min"
        >{{ minValue }}{{ unitShort }}</span
    >
    <span
        *ngIf="trackForegroundRight <= maxBubblePosition"
        class="bubble-span-max"
        >{{ maxValue }}{{ unitShort }}</span
    >
    <div
        id="svg-div"
        (mousedown)="onMouseDown($event)"
        (mouseup)="onMouseUp($event)"
        (mouseenter)="onMouseEnter($event)"
        (mouseleave)="onMouseLeave($event)"
        (mousemove)="onMouseMove($event)">
        <svg>
            <!-- slider track background -->
            <rect
                [attr.x]="thumbRadius"
                [attr.y]="thumbRadius - (trackWidth / 2)"
                [attr.width]="sliderWidth - 2*thumbRadius"
                [attr.height]="trackWidth"
                rx="4"
                fill="#344a69" />
            <!-- slider track foreground -->
            <rect
                [attr.x]="trackForegroundLeft"
                [attr.y]="thumbRadius - (trackWidth / 2)"
                [attr.width]="trackForegroundRight - trackForegroundLeft"
                [attr.height]="trackWidth"
                rx="4"
                fill="#e10072" />
            <!-- slider thumbs -->
            <circle
                *ngFor="let thumb of thumbs"
                [attr.cx]="thumb.position"
                [attr.cy]="thumbRadius"
                [attr.r]="thumbRadius"
                fill="#e10072" />
        </svg>
    </div>
</div>
