<div class="d-flex justify-content-between">
    <label
        for="{{ motorName }}"
        id="label_{{motorName}}"
        class="form-label"
        >{{ labelName }}: {{ sliderFormControl.value }}
    </label>
    <div class="d-flex align-items-center">
        <div
            class="form-check d-inline"
            *ngIf="showCheckBox === true">
            <input
                class="form-check-input"
                id="checkbox_{{ motorName }}"
                type="checkbox"
                [formControl]="motorFormControl"
                (change)="turnTheMotorOnAndOff()" />
            <label
                class="form-check-label"
                for="checkbox_{{ motorName }}">
                Active
            </label>
        </div>
        <button
            *ngIf="showMotorSettingsButton === true"
            id="dialogBtn_{{ motorName }}"
            class="bi bi-gear btn btn-outline-primary"
            style="margin-left: 10px; border: 0"
            (click)="openPopup(content)"></button>
    </div>
</div>

<div class="range-wrap">
    <div
        class="range-value"
        #bubble>
        <input
            class="bubble-input overlay"
            id="bubble_input_{{ motorName }}"
            min="{{ minSliderValue }}"
            max="{{ maxSliderValue }}"
            *ngIf="isInputVisible"
            [formControl]="bubbleFormControl"
            (blur)="toggleInputUnvisible()"
            (keydown.enter)="toggleInputUnvisible()"
            #bubbleInput />
        <div
            class="bubble-span overlay"
            id="bubble_span_{{ motorName }}"
            *ngIf="!isInputVisible"
            (dblclick)="toggleInputVisible()">
            {{ bubbleFormControl.value }}°
        </div>
    </div>
    <span
        *ngIf="bubblePosition >= minBubblePosition"
        class="bubble-span-min"
        >{{ minSliderValue }}°</span
    >
    <span
        *ngIf="bubblePosition <= maxBubblePosition"
        class="bubble-span-max"
        >{{ maxSliderValue }}°</span
    >
    <input
        class="range"
        type="range"
        id="slider_{{ motorName }}"
        min="{{ minSliderValue }}"
        max="{{ maxSliderValue }}"
        step="1"
        [formControl]="sliderFormControl"
        (input)="setThumbPosition(); inputSendMsg()"
        #range />
</div>

<ng-template
    #content
    let-modal
    id="ng-template">
    <div class="row display-flex modal-header">
        <div class="col">
            <span>MOTOR SETTINGS</span>
        </div>
        <div class="col text-right">
            <button
                id="x-button"
                type="button"
                (click)="modal.dismiss('Cross click')"
                class="btn">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="10"
                    height="16">
                    <text
                        font-family="Titillium"
                        fill="#FFF"
                        font-weight="bold"
                        font-size="16"
                        y="11.062">
                        X
                    </text>
                </svg>
            </button>
        </div>
    </div>
    <div class="row display-flex mt-5 mb-3">
        <div class="col text-right">
            <span> SPEED SETTINGS </span>
        </div>
        <div class="col-md-auto">
            <button (click)="changeIcon()">
                <img
                    [src]="imgSrc"
                    alt="testbutton" />
            </button>
        </div>
        <div class="col">
            <span> EXTENDED VALUES </span>
        </div>
    </div>
    <div
        *ngIf="imgSrc === '../../assets/mock_button2.png'"
        class="row justify-content-center">
        <div class="col-9">
            <app-multi-slider
                [minValue]="0"
                [maxValue]="65535"
                [step]="1"
                [unitLong]="'μs'"
                name="Pulse width "
                [minInit]="pulseMinRange.value"
                [maxInit]="pulseMaxRange.value"
                [messageReceiver$]="pulseWidthSubject$"
                (multiSliderEvent)="setPulseRanges($event)"></app-multi-slider>
        </div>
    </div>
    <div
        *ngIf="imgSrc === '../../assets/mock_button2.png'"
        class="row display-flex justify-content-center">
        <div class="col-9">
            <app-multi-slider
                [minValue]="-9000"
                [maxValue]="9000"
                [step]="1"
                [unitShort]="'°'"
                [unitLong]="'°/100'"
                name="Degree"
                [minInit]="degreeMinFormcontrol.value"
                [maxInit]="degreeMaxFormcontrol.value"
                [messageReceiver$]="degreeSubject$"
                (multiSliderEvent)="setDegree($event)"></app-multi-slider>
        </div>
    </div>
    <div
        *ngIf="imgSrc === '../../assets/mock_button2.png'"
        class="row display-flex justify-content-center">
        <div class="col-9">
            <!-- <span>Period (μs)</span>
            <input
                id="periodSlider"
                type="range"
                min="1"
                max="65535"
                step="1"
                class="form-range"
                [value]="periodFormControl.value"
                [formControl]="periodFormControl"
                (input)="inputSendSettingsMsg()" />
            <input
                id="periodInput"
                type="number"
                min="1"
                max="65535"
                [value]="periodFormControl.value"
                name="Period"
                [formControl]="periodFormControl"
                (input)="inputSendSettingsMsg()" />
            <span *ngIf="!periodFormControl.valid && periodFormControl.touched">
                style="color: red; font-size: 8px"> Period can not be empty,
                greater than 65535μs or smaller than 1
            </span> -->
            <app-multi-slider></app-multi-slider>
        </div>
    </div>
    <div
        *ngIf="imgSrc === '../../assets/mock_button.png'"
        class="row modal-body h-100 d-flex align-items-start justify-content-center">
        <div class="col-3 ml-2 mr-2">
            <app-vertical-slider
                name="Velocity"
                [rangeFormControl]="velocityFormControl"
                [parentFunction]="inputSendSettingsMsg"
                [minValue]="0"
                [maxValue]="500000"></app-vertical-slider>
        </div>
        <div class="col-3 ml-2 mr-2">
            <app-vertical-slider
                name="Acceleration"
                [rangeFormControl]="accelerationFormControl"
                [parentFunction]="inputSendSettingsMsg"
                [minValue]="0"
                [maxValue]="500000"></app-vertical-slider>
        </div>
        <div class="col-3 ml-2 mr-2">
            <app-vertical-slider
                name="Deceleration"
                [rangeFormControl]="decelerationFormControl"
                [parentFunction]="inputSendSettingsMsg"
                [minValue]="0"
                [maxValue]="500000"></app-vertical-slider>
        </div>
    </div>
</ng-template>
