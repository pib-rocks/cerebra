<div class="row mt-4">
    <div class="row pink-corner-frame w-100">
        <div class="col-sm-9 col-xl-10">
            <router-outlet></router-outlet>
        </div>
        <div
            class="col-sm-3 col-xl-2 p-0"
            style="background-color: #041939">
            <div
                class="pt-4 text-center"
                style="background-color: #041939">
                <label class="p-1 text-break">Voice interaction</label>
                <div class="row">
                    <div class="col text-right">
                        <span class="align-middle">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                height="20"
                                width="25"
                                viewBox="0 0 640 512">
                                <path
                                    fill="#ffffff"
                                    d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L472.1 344.7c15.2-26 23.9-56.3 23.9-88.7V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 21.2-5.1 41.1-14.2 58.7L416 300.8V96c0-53-43-96-96-96s-96 43-96 96v54.3L38.8 5.1zm362.5 407l-43.1-33.9C346.1 382 333.3 384 320 384c-70.7 0-128-57.3-128-128v-8.7L144.7 210c-.5 1.9-.7 3.9-.7 6v40c0 89.1 66.2 162.7 152 174.4V464H248c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H344V430.4c20.4-2.8 39.7-9.1 57.3-18.2z" />
                            </svg>
                        </span>
                    </div>
                    <div class="col pr-0 pl-0">
                        <button
                            class="btn border-0 p-0"
                            id="sidebar-right-toggle-voice-assistant"
                            type="button"
                            value="{{turnedOn}}"
                            (click)="toggleVoiceAssistant()">
                            <img
                                [src]="turnedOn ? '../../assets/toggle-switch-right.png' : '../../assets/toggle-switch-left.png' "
                                alt="Toggle for turning the Voice Assistant on and off" />
                        </button>
                    </div>
                    <div class="col text-left">
                        <span class="align-middle">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                height="20"
                                width="15"
                                viewBox="0 0 384 512">
                                <path
                                    fill="#ffffff"
                                    d="M192 0C139 0 96 43 96 96V256c0 53 43 96 96 96s96-43 96-96V96c0-53-43-96-96-96zM64 216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 89.1 66.2 162.7 152 174.4V464H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H216V430.4c85.8-11.7 152-85.3 152-174.4V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 70.7-57.3 128-128 128s-128-57.3-128-128V216z" />
                            </svg>
                        </span>
                    </div>
                    <a
                        *ngIf="turnedOn && (activeChatId != currentChatId)"
                        [routerLink]="['/', 'voice-assistant', activePersonalityId, 'chat', activeChatId]"
                        >Jump to active chat
                    </a>
                </div>
            </div>
            <div>
                <app-sidebar-right
                    [optionCallbackMethods]="optionCallbackMethods"
                    [dropdownCallbackMethods]="dropdownCallbackMethods"
                    [subject]="subject"
                    [lStorage]="'chat'"
                    [elementIcon]="personalityIcon"
                    [selectedObservable]="selected">
                </app-sidebar-right>
            </div>
        </div>
    </div>
</div>

<ng-template
    #modalContent
    let-modal
    id="template">
    <div
        class="row display-flex modal-header"
        id="modal-header">
        <div
            class="col-10"
            id="header-title">
            <span id="header-title-text">ADD CHAT</span>
        </div>
        <div
            class="col-2 text-right"
            id="close-button">
            <button
                id="modal-close-button"
                type="button"
                (click)="modal.dismiss('Cross click')"
                class="btn">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="10"
                    height="16">
                    <text
                        font-family="Titillium"
                        fill="#FFF"
                        font-weight="bold"
                        font-size="16"
                        y="12">
                        X
                    </text>
                </svg>
            </button>
        </div>
    </div>
    <div
        class="row m-2 mt-4 pr-2"
        id="row-name">
        <label
            for="name-input"
            class="col-3 mt-2 justify-content-end"
            id="label-name"
            >Name</label
        >
        <input
            ngbAutofocus
            class="col-9"
            [formControl]="topicFormControl"
            type="text"
            (keydown)="($event).key ==='Enter' ? this.saveChat(): ''"
            name="name-input"
            id="name-input" />
    </div>
    <div class="row justify-content-center mt-2 mb-3">
        <div class="col-3 align-self-center">
            <button
                type="button"
                [disabled]="topicFormControl.invalid"
                class="btn btn-regular"
                id="modal-save-button"
                (keydown.enter)="saveChat()"
                (click)="saveChat()">
                Save
            </button>
        </div>
        <div class="col-3 align-self-center">
            <button
                type="button"
                class="btn btn-regular"
                id="modal-cancel-button"
                (click)="closeModal()">
                Cancel
            </button>
        </div>
    </div>
</ng-template>
